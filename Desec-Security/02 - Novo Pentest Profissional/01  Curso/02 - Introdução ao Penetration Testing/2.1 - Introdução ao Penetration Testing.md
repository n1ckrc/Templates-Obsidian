
## **Introdução ao Penetration Test - Pentest**
 
Pentest é a abreviação de Penetration Testing ou Teste de Penetração. No brasil é mais conhecido como Teste de Invasão ou Intrusão.

Consiste em um teste de segurança em sistemas par identificar e explorar fraquezas e vulnerabilidade de segurança com objetivo de medir o grau de risco e impacto que essas fraquezas possam trazer para a organização.

Desta forma a empresa pode melhorar sua segurança assim como se antecipar aos riscos encontrados.

**Pentester** é o profissional que realiza o serviço de Pentest.


### Importância do Pentest

-   Identificar superfície de ataque e medir o nível de exposição do ambiente da empresa
-   Testar controles e implementações
-   Ficar em conformidade com normas de segurança (exemplo: PPCI-DSS)

  
### Os resultados permitem:

-   Comprovar o impacto do risco
-   Tomar melhores decisões e investir corretamente em segurança
-   Melhorar os controles e mecanismos de defesa
-   Se antecipar a ataques futuros

 
## **Tipos de Teste de Segurança**

  

### Análise de Vulnerabilidade

Indicada para testar uma grande quantidade de sistemas em um curto período de tempo.
O profissional realiza os testes e pode fazer as PoC (prova de conceitos) com base nos resultados que a ferramenta apresenta.

### Automatizado

√ Rápido
X Pode apresentar falsos positivos
X Não explora a vulnerabilidade
X Só encontra o que conhece
X Pode conter erros

  
###  Pentest (Penetration Testing)

Leva mais tempo comparado com uma análise de vulnerabilidade, porém é maias preciso e eficaz. Permite uma visão real do risco e impacto para o negócio, possibilidade de encontrar vulnerabilidades não conhecidas.

√ Explora a vulnerabilidade e mede o impacto
√ Possibilita encontrar vulnerabilidades não conhecidas
√ Não tem "achismo"
√ Mistura testes automatizados com testes manuais
X Leva mais tempo comparado com uma avaliação automatizada (Análise de vulnerabilidade)


### Red Team

Tem uma abordagem mais ampla que um Pentest, normalmente tem um objetivo específico e bem definido (Ex: Conseguir acesso às contas dos diretores da empresa, conseguir acesso ao servidor principal da rede interna) e normalmente não existe regras e limitações de uso de Engenharia Social, ataques físicos, tempo etc.

√ Possibilita uma visão real dos riscos
√ Permite testar o time de resposta a incidentes (Blue Team)
X Preço alto


###  Exemplos e Abordagens

  

**CENÁRIO** | **TIPO DE TESTE DE SEGURANÇA**
:------------: | :------:
Testar um sistema específico (Aplicação Web, Aplicativo Mobile, Servidor Etc). | PENTEST / ANÁLISE DE VULNERABILIDADE 
Testar um ambiente Completo, mas sem uso de engenharia social (Tentar comprometer o ambiente de alguma forma). | PENTEST EXTERNO COMPLETO 
Testar um ambiente completo com um objetivo específico, mas sem regras. | RED TEAM   
Testar uma grande quantidade de hosts/aplicações em um curto período de tempo (Um teste mais superficial). | ANÁLISE DE VULNERABILIDADES 

              

  ---

## **Modalidade de Pentest**

  
### Blackbox

Na caixa preta o cliente não passa nenhuma informação do ambiente que será testado. É meio que um teste às segas.

### Graybox

O cliente pode passar informações parciais.

### Whitebox

O cliente passa todas as informações necessárias para os testes. Como uma aplicação web


### Tipos de Pentest

-   Pentest Web
-   Pentest Mobile
-   Pentest Rede
-   Pentest Wireless
-   Pentest Físico
-   Engenharia Social
-   Teste de Stress (DDoS)

**Pentest Externo**: Realizado a partir da internet.
**Pentest Interno**: Normalmente alocado no cliente.


## Metodologias

 
**PTES**: [http://www.pentest-standard.org/index.php/Main_Page](http://www.pentest-standard.org/index.php/Main_Page)

Metodologia mais moderna e alimentada pela comunidade de segurança internacionais.

-   Preparação
-   Coleta de informações
-   Modelagem
-   Análise de Vulnerabilidades
-   Exploração
-   Pós-Exploração
-   Relatório

### Metodologia Desec Next Generation Pentest

  

**Mapeamento** | **Análise de Vulnerabilidades** | **Mitigação**
--------|---------|---------
Mapeamento superfície | Análise de Vulnerabilidades | DNGP Report
Reconhecer ambiente   | Validação e exploração      | Reteste
Análise do ambiente   | Coleta de Evidências


- **OWASP** - [https://www.owasp.org/index.php/Main_Page](https://www.owasp.org/index.php/Main_Page)
- **NIST** - [https://csrc.nist.gov/publications/detail/sp/800-115/final](https://csrc.nist.gov/publications/detail/sp/800-115/final)
- **OSSTMM** - [https://isecom.org/mirror/OSSTMM.3.pdf](https://isecom.org/mirror/OSSTMM.3.pdf)

  
### Preparando para ação (Cliente)


Conversando com o cliente
Objetivo: Entender de forma clara as necessidades do cliente
O que o cliente espera do Pentest?

Exemplo de perguntas:
√ É o primeiro teste?
√ É para cumprir alguma compilance? (Ex: PCI-DDS
√ O que considera valioso? Quais as preocupações?
√ Existe algum sistema frágil?
√ Qual o objetivo do Pentest?
√ O que considera sucesso no projeto?
√ Existe alguma limitação?

### Definir o Escopo

Após entender as necessidades do cliente, precisamos definir o escopo e o tipo de teste escolhido, Ex:

-   Tipo de Teste: Pentest Black Box Externo (abordagem ampla)
-   Tipo de Teste: Pentest Web GrayBox (abordagem específica)

-   Definir URL/IPs.
-   O que será testado
-   O que não será testado

### Limitações no Escopo

**Existe limitações no escopo?**
x Ataque de Stress (DDoS) não são permitidos
x Ataques de Engenharia social não são permitidos
x Não atacar o serviço "XYZ"

**Janela de Testes**
Definir a data de início dos testes e o horário permitido

Exemplo:
x Executar apenas em horário comercial (9h às 18h)
x Não existe limites de horário


### Processo de Venda

-   Reunião de alinhamento
-   Apresentação da Empresa
-   Entender o cliente
-   Enviar Proposta
-   Análise de documentos
-   Início dos Testes
-   Entrega dos Resultados